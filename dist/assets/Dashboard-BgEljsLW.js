import{j as e,m as t}from"./utils-CdldNp8C.js";import{r as a}from"./react-vendor-qiAl16-a.js";import{u as s,t as l}from"./index-BWWBunTH.js";import{ae as o,t as r,K as n,N as i,C as c,a1 as d,a as g,b as m,c as u}from"./ui-vendor-CMHmWg4l.js";function S(){const[S,f]=a.useState(null),[x,h]=a.useState(!0),[v,j]=a.useState([]),p=("undefined"!=typeof window?localStorage.getItem("tenantSlug"):null)||"captar",y=s();a.useEffect(()=>{(async()=>{try{if("captar"===String(p).toLowerCase()){try{localStorage.setItem("adminContext","1")}catch{}const e=await y.listTenants(),t=(e.rows||[]).filter(e=>"captar"!==String(e.Slug??e.slug).toLowerCase()),a=t.length>0?[{label:"TODOS OS TENANTS",value:""},...t.map(e=>({label:String(e.Nome??e.nome),value:String(e.Slug??e.slug)}))]:[];j(a)}else j([])}catch{}w()})()},[]);const w=async()=>{try{h(!0);const e=await y.getDashboardStats();f(e)}catch(e){l.error("Erro ao carregar dados do dashboard")}finally{h(!1)}};return e.jsxs(t.div,{className:"dashboard-container",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:[x&&e.jsx("div",{className:"dashboard-loading",style:{position:"relative",zIndex:1,marginBottom:12},children:e.jsx(o,{size:"large"})}),"captar"===String(p).toLowerCase()&&v.length>0&&e.jsxs("div",{style:{marginBottom:12,display:"flex",gap:8,alignItems:"center"},children:[e.jsx("span",{style:{fontSize:12,color:"#666"},children:"VISUALIZAR:"}),e.jsx(r,{style:{minWidth:240},size:"small",placeholder:"Selecionar tenant",value:("undefined"!=typeof window?localStorage.getItem("viewTenantSlug"):null)||"",options:v,onChange:e=>{try{const t=v.find(t=>String(t.value).toLowerCase()===String(e).toLowerCase()),a=t?t.label:e;e?(localStorage.setItem("viewTenantSlug",String(e)),localStorage.setItem("viewTenantName",String(a))):(localStorage.removeItem("viewTenantSlug"),localStorage.removeItem("viewTenantName"))}catch{}w()}})]}),e.jsxs(n,{gutter:[16,16],className:"stats-row",children:[e.jsx(i,{xs:24,sm:12,md:8,xl:8,children:e.jsx(c,{style:{background:"#e6f4ff"},hoverable:!0,children:e.jsx(d,{title:"TOTAL DE ELEITORES",value:S?.total_eleitores||0,prefix:e.jsx(g,{}),valueStyle:{color:"#1677ff",fontWeight:700}})})}),e.jsx(i,{xs:24,sm:12,md:8,xl:8,children:e.jsx(c,{style:{background:"#f6ffed"},hoverable:!0,children:e.jsx(d,{title:"TOTAL DE ATIVISTAS",value:S?.total_ativistas||0,prefix:e.jsx(m,{}),valueStyle:{color:"#52c41a",fontWeight:700}})})}),e.jsx(i,{xs:24,sm:12,md:8,xl:8,children:e.jsx(c,{style:{background:"#fff7e6"},hoverable:!0,children:e.jsx(d,{title:"TOTAL DE USU√ÅRIOS",value:S?.total_usuarios||0,prefix:e.jsx(u,{}),valueStyle:{color:"#faad14",fontWeight:700}})})})]})]})}export{S as default};
