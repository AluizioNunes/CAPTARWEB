import{u as e,t as a,j as s}from"./index-DfSuK2jA.js";import{r as t}from"./react-vendor-31_VYUn4.js";import{m as r}from"./utils-DLZ5AbYM.js";import{ag as i,t as l,K as o,N as n,C as m,a4 as c,a as u,b as d,c as b}from"./ui-vendor-CwlfwZAq.js";import"./charts-vendor-CRs37Wg2.js";function h(){const[h,N]=t.useState(null),[g,D]=t.useState(!0),[S,T]=t.useState([]),f=("undefined"!=typeof window?localStorage.getItem("tenantSlug"):null)||"captar",x=e();t.useEffect(()=>{(async()=>{try{if("captar"===String(f).toLowerCase()){try{localStorage.setItem("adminContext","1")}catch{}const e=await x.listTenants(),a=(e.rows||[]).filter(e=>"captar"!==String(e.Slug??e.slug).toLowerCase()),s=a.length>0?[{label:"TODOS OS TENANTS",value:""},...a.map(e=>({label:String(e.Nome??e.nome),value:String(e.Slug??e.slug)}))]:[];T(s)}else T([])}catch{}v()})()},[]);const v=async()=>{try{D(!0);const e=await x.getDashboardStats();N(e)}catch(e){a.error("Erro ao carregar dados do dashboard")}finally{D(!1)}};return s.jsxDEV(r.div,{className:"dashboard-container",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:[g&&s.jsxDEV("div",{className:"dashboard-loading",style:{position:"relative",zIndex:1,marginBottom:12},children:s.jsxDEV(i,{size:"large"},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:51,columnNumber:13},this)},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:50,columnNumber:11},this),"captar"===String(f).toLowerCase()&&S.length>0&&s.jsxDEV("div",{style:{marginBottom:12,display:"flex",gap:8,alignItems:"center"},children:[s.jsxDEV("span",{style:{fontSize:12,color:"#666"},children:"VISUALIZAR:"},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:56,columnNumber:13},this),s.jsxDEV(l,{style:{minWidth:240},size:"small",placeholder:"Selecionar tenant",value:("undefined"!=typeof window?localStorage.getItem("viewTenantSlug"):null)||"",options:S,onChange:e=>{try{const a=S.find(a=>String(a.value).toLowerCase()===String(e).toLowerCase()),s=a?a.label:e;e?(localStorage.setItem("viewTenantSlug",String(e)),localStorage.setItem("viewTenantName",String(s))):(localStorage.removeItem("viewTenantSlug"),localStorage.removeItem("viewTenantName"))}catch{}v()}},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:57,columnNumber:13},this)]},void 0,!0,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:55,columnNumber:11},this),s.jsxDEV(o,{gutter:[16,16],className:"stats-row",children:[s.jsxDEV(n,{xs:24,sm:12,md:8,xl:8,children:s.jsxDEV(m,{style:{background:"#e6f4ff"},hoverable:!0,children:s.jsxDEV(c,{title:"TOTAL DE ELEITORES",value:h?.total_eleitores||0,prefix:s.jsxDEV(u,{},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:86,columnNumber:25},this),valueStyle:{color:"#1677ff",fontWeight:700}},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:83,columnNumber:15},this)},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:82,columnNumber:13},this)},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:81,columnNumber:11},this),s.jsxDEV(n,{xs:24,sm:12,md:8,xl:8,children:s.jsxDEV(m,{style:{background:"#f6ffed"},hoverable:!0,children:s.jsxDEV(c,{title:"TOTAL DE ATIVISTAS",value:h?.total_ativistas||0,prefix:s.jsxDEV(d,{},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:96,columnNumber:25},this),valueStyle:{color:"#52c41a",fontWeight:700}},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:93,columnNumber:15},this)},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:92,columnNumber:13},this)},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:91,columnNumber:11},this),s.jsxDEV(n,{xs:24,sm:12,md:8,xl:8,children:s.jsxDEV(m,{style:{background:"#fff7e6"},hoverable:!0,children:s.jsxDEV(c,{title:"TOTAL DE USU√ÅRIOS",value:h?.total_usuarios||0,prefix:s.jsxDEV(b,{},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:106,columnNumber:25},this),valueStyle:{color:"#faad14",fontWeight:700}},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:103,columnNumber:15},this)},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:102,columnNumber:13},this)},void 0,!1,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:101,columnNumber:11},this)]},void 0,!0,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:80,columnNumber:9},this)]},void 0,!0,{fileName:"D:/PROJETOS/CAPTAR/src/pages/Dashboard.tsx",lineNumber:48,columnNumber:5},this)}export{h as default};
