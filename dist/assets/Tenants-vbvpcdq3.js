import{j as e,m as a}from"./utils-CdldNp8C.js";import{r as t}from"./react-vendor-qiAl16-a.js";import{u as n}from"./index-Cw49fHmj.js";import{F as s,S as l,B as i,l as r,h as d,I as o,t as c,s as u}from"./ui-vendor-CnmmTMy8.js";function x(){const x=n(),[m,I]=t.useState([]),[T,j]=t.useState(!1),[y,p]=t.useState(!1),[h,S]=t.useState(null),[A]=s.useForm(),O=async()=>{try{j(!0);const e=await x.listTenants();I(e.rows||[])}catch(e){u.error(e?.response?.data?.detail||"Erro ao carregar tenants")}finally{j(!1)}};t.useEffect(()=>{O()},[]);const f=[{title:"ID",dataIndex:"IdTenant"},{title:"NOME",dataIndex:"Nome"},{title:"SLUG",dataIndex:"Slug"},{title:"STATUS",dataIndex:"Status"},{title:"PLANO",dataIndex:"Plano"},{title:"ATUALIZADO",dataIndex:"DataUpdate"},{title:"AÇÕES",dataIndex:"__actions__",render:(a,t)=>e.jsxs(l,{children:[e.jsx(i,{type:"text",onClick:()=>{S(t),A.setFieldsValue(t),p(!0)},children:"EDITAR"}),e.jsx(i,{type:"text",danger:!0,onClick:async()=>{try{await x.deleteTenant(t.IdTenant),u.success("Tenant deletado"),await O()}catch(e){u.error(e?.response?.data?.detail||"Erro ao deletar")}},children:"DELETAR"})]})}];return e.jsxs(a.div,{className:"page-container",initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:12},children:e.jsx(l,{children:e.jsx(i,{type:"primary",onClick:()=>{S(null),A.resetFields(),p(!0)},children:"NOVO TENANT"})})}),e.jsx(r,{rowKey:e=>e.IdTenant||JSON.stringify(e),loading:T,dataSource:m,columns:f,bordered:!0,size:"middle"}),e.jsx(d,{open:y,title:h?.IdTenant?"Editar Tenant":"Novo Tenant",onCancel:()=>p(!1),onOk:async()=>{try{const e=await A.validateFields();h?.IdTenant?(await x.updateTenant(h.IdTenant,e),u.success("Tenant atualizado")):(await x.createTenant(e),u.success("Tenant criado")),p(!1),S(null),await O()}catch{}},children:e.jsxs(s,{form:A,layout:"vertical",children:[e.jsx(s.Item,{name:"Nome",label:"Nome",rules:[{required:!0}],children:e.jsx(o,{})}),e.jsx(s.Item,{name:"Slug",label:"Slug",rules:[{required:!0}],children:e.jsx(o,{})}),e.jsx(s.Item,{name:"Status",label:"Status",children:e.jsx(c,{options:[{value:"ATIVO",label:"ATIVO"},{value:"INATIVO",label:"INATIVO"}]})}),e.jsx(s.Item,{name:"Plano",label:"Plano",children:e.jsx(c,{options:[{value:"PADRAO",label:"PADRÃO"},{value:"PRO",label:"PRO"}]})})]})})]})}export{x as default};
